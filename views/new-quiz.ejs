<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- jquery plug -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

  <!-- css -->
  <link rel="stylesheet" href="/styles/nav.css" type="text/css">
  <link rel="stylesheet" href="/styles/new-quiz.css" type="text/css">

  <!-- basic head -->
  <%- include('partials/_head', { pageTitle: 'New Quiz' }) %>
</head>

<body>
  <div id="new-quiz-container"></div>
  <!-- including the nav bar  -->
  <%- include('partials/_nav') %>
    <header>
      <div class="new-quiz-info">
        <!-- title -->
        <form>
          <label for="new-title-form">Title:</label><br>
          <input type="text" id="new-title-form" name="new-title-form" value="My Quiz" onkeyup="updateQuizTitle()"><br>
        </form>
        <h1 id="new-quiz-title">My Quiz</h1>
        <script>
          function updateQuizTitle() {
            var inputValue = document.getElementById("new-title-form").value;
            // Update the content of the new-quiz-title h1 element
            document.getElementById("new-quiz-title").innerText = inputValue;
          }
        </script>

        <!-- author -->
        <form>
          <label for="new-author-form">Author:</label><br>
          <input type="text" id="new-author-form" name="new-author-form" value="Jane Doe"
            onkeyup="updateQuizauthor()"><br>
        </form>
        <h4 id="new-quiz-author">Jane Doe</h4>
        <script>
          function updateQuizauthor() {
            var inputValue = document.getElementById("new-author-form").value;
            // Update the content of the new-quiz-autho h1 element
            document.getElementById("new-quiz-author").innerText = inputValue;
          }
        </script>
      </div>

    </header>

    <main class="new-quiz-container">

      <section class="new-quiz-questions">
        <!-- dynamic question 1 form -->
        <form>
          <label for="new-question-form">Question 1:</label><br>
          <input type="text" id="new-question-form" name="new-question-form" value="Whats up?"
            onkeyup="updateQuestion1()"><br>
        </form>
        <h4 id="new-question-1">What's up?</h4>
        <script>
          function updateQuestion1() {
            var inputValue = document.getElementById("new-question-form").value;
            // Update the content of the new-question-1 h1 element
            document.getElementById("new-question-1").innerText = inputValue;
          }
        </script>

        <div class="question-1-options">
          <fieldset>
            <div class="new-question-options-box">
              <div class="new-question-option"><input type="text" name="option-1" value="option-1" /></div>
              <div class="new-question-option"><input type="text" name="option-2" value="option-2" /></div>
            </div>
            <button id="add-option-btn">Add Another option</button>
          </fieldset>
          <br>
        </div>
      
      </section>
      <br>
      <script>
        $(document).ready(function() {
          var optionCounter = 2; // Start at the third option
          
          $('#add-option-btn').click(function() {
            // Increment the option counter for related option-ids
            optionCounter++;
            
            // Create a new option form
            var newOptionHtml = `
            <div class="new-question-option"><input type="text" name="option-${optionCounter}" value="option-${optionCounter}" /></div>
            `
            // Append the new question HTML to the "new-questions" section
            $('.new-question-options-box').append(newOptionHtml);
          });
        });
        </script>
      <button id="add-question-btn">Add Another Question</button>
      <br>
      <button>Save</button> <!-- MUST PUSH TO SQL WITHOUT REFRESHING -->
      <script>
        $(document).ready(function() {
          var questionCounter = 1; // Start after the first question
          
          $('#add-question-btn').click(function() {
            // Increment the question counter for unique question-ids
            questionCounter++;
            
            // Create a new question form
            var newQuestionHtml = `
            <form>
              <label for="new-question-form-${questionCounter}">Question ${questionCounter}:</label><br>
              <input type="text" id="new-question-form-${questionCounter}" name="new-question-form-${questionCounter}" value="Whats up?" onkeyup="updateQuestion${questionCounter}()"><br>
              </form>
              <h4 id="new-question-${questionCounter}">What's up?</h4>
              <div class="question-${questionCounter}-options">
                <fieldset>
                  <div class="new-question-options-box">
                    <div class="new-question-option"><input type="text" name="option-1" value="option-1" /></div>
                    <div class="new-question-option"><input type="text" name="option-2" value="option-2" /></div>
                    <button id="add-option-btn">Add Another option</button>
                    </div>
                    </fieldset>
                    <br>
                    </div>`;
                    
                    // Append the new question HTML to the "new-questions" section
                    $('.new-quiz-questions').append(newQuestionHtml);
                  });
                });
                </script>

    </main>
  </div>
</body>

</html>

