<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/_head', { pageTitle: 'Quiz ' }) %>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="/scripts/dashboard.js"></script>

    <link rel="stylesheet" href="/styles/dashboard.css" type="text/css" />
</head>

<body class="dashboard-page">
  <% const dashboardPage=true; %>
    <%- include('partials/_nav', { dashboardPage: false }) %>

      <section id="page-content">
        <main class="container">

          <label for="individual-quiz" class="individual-quiz-title">
            <% const title=JSON.stringify(dashboard.quizData.rows[0].title) %>
              <h1>
                <%= title %>
              </h1>
          </label>

          <label for="individual-quiz" class="individual-quiz-author">
            <h3> by <%= (dashboard.authorData.rows[0].name) %>
                </p>
          </label>
          <br />

          <!-- // for loop to make questions  -->
          <% const questions=dashboard.questionsData.rows %>

            <% let questionCounter=0; %>

              <% for (question of questions) { %>

                <div class="quiz-card-container">
                  <div class="quiz-content">
                    <div class="question">
                      <%= question.content %>
                    </div>

                    <fieldset>
                      <% let opts=0 %>
                        <div class="answer-options">

                          <% const options=dashboard.optionsData.rows.filter(opt=> opt.question_id === question.id) %>
                            <% for (let i=0; i < question.number_of_options && i < options.length; i++) { %>
                              <div class="answer-option">
                                <input type="radio" name="<%= options[i].content %>"
                                  value="<%= options[i].content %>" />
                                <%= options[i].content %>
                              </div>
                              <% } %>
                        </div>
                    </fieldset>
                  </div>
                  <div class="reactions">
                    <div class="reaction"><i class="fa-regular fa-flag"></i></div>
                    <div class="reaction"><i class="fa-solid fa-retweet"></i></div>
                    <div class="reaction"><i class="fa-regular fa-heart"></i></div>
                  </div>
                </div>
                <% questionCounter++; %>
                  <% } %>


        </main>
      </section>
</body>

</html>